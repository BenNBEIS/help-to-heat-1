{% extends "base_generic_gov.html" %}
{% from "govuk_frontend_jinja/components/tabs/macro.html" import govukTabs %}

{% macro dashboard() -%}
  <h1 class="govuk-heading-l">Logged in as: {{request.user.email}} for {{request.user.supplier.name}}</h1>

  <p class="govuk-body">You have {{request.user.referral_count}} new referrals</p>
{%- endmacro%}

{% macro download() -%}
  <a class="govuk-button" data-module="govuk-button" href="">
    Download latest referrals
  </a>
{%- endmacro%}

{% macro archive() -%}
  <ul>
    {% for file_data in archived_files  %}
      <li><a href="#">Download {{file_data.date}}</a></li>
    {% endfor %}
  </ul>
{%- endmacro%}

{% block content %}

  {{ govukTabs({
    'items': [
      {
        'label': "Dashboard",
        'id': "dashboard-tab",
        'panel': {
          'html': dashboard()
        }
      },
      {
        'label': "Download",
        'id': "download-tab",
        'panel': {
          'html': download()
        }
      },
      {
        'label': "Archive",
        'id': "archive-tab",
        'panel': {
          'html': archive()
        }
      }
    ]
    }) }}

{% endblock %}
