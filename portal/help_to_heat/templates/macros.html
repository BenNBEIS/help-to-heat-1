{% macro form_wrapper(prev_url, button_label="Continue") -%}
  {% if prev_url %}
    <a href="{{prev_url}}" class="govuk-back-link">Back</a>
  {% endif %}
  {% if errors %}
    {{error_summary(errors)}}
  {% endif %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <form method="post" novalidate>
        {{csrf_input}}

        {{caller()}}

        <button class="govuk-button" data-module="govuk-button">
          {{button_label}}
        </button>
      </form>
    </div>
  </div>
{%- endmacro%}

{% macro radios(id, name, options, data, errors) -%}
  {% if errors.get(name) %}
    <p id="{{id}}-error" class="govuk-error-message">
      <span class="govuk-visually-hidden">Error:</span> {{errors.get(name)}}
    </p>
  {% endif %}
  <div id="question-{{name}}" class="govuk-radios" data-module="govuk-radios">
    {% for option in options %}
      <div class="govuk-radios__item">
        <input class="govuk-radios__input" id="id-{{slugify(option)}}" name="{{name}}" type="radio" value="{{option}}" {{is_checked(data, name, option)}}>
        <label class="govuk-label govuk-radios__label" for="id-{{slugify(option)}}">
          {{option}}
        </label>
      </div>
    {% endfor %}
  </div>
{%- endmacro%}

{% macro input(id, name, label, data, errors) -%}
  {% if errors.get(name) %}
    <p id="{{id}}-error" class="govuk-error-message">
      <span class="govuk-visually-hidden">Error:</span> {{errors.get(name)}}
    </p>
  {% endif %}

  <div id="question-{{name}}" class="govuk-form-group {{errors.get(name) and 'govuk-form-group--error' or ''}}">
    <label class="govuk-label" for="{{id}}">
      {{label}}
    </label>
    <input class="govuk-input" id="{{id}}" name="{{name}}" type="text" autocomplete="{{id}}" value="{{data.get(name, '')}}">
  </div>
{%- endmacro%}

{% macro error_summary(errors) -%}
  <div class="govuk-error-summary" data-module="govuk-error-summary">
    <div role="alert">
      <h2 class="govuk-error-summary__title">
        There is a problem
      </h2>
      <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
          {% for (key, message) in errors.items() %}
            <li>
              <a href="#question-{{key}}">{{message}}</a>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
{%- endmacro%}

{% macro details_summary(summary_lines) -%}
  <dl class="govuk-summary-list govuk-!-margin-bottom-9">
    {% for summary_line in summary_lines %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          {{summary_line.question}}
        </dt>
        <dd class="govuk-summary-list__value">
          {{summary_line.answer}}
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="{{summary_line.change_url}}">
            Change<span class="govuk-visually-hidden"> {{summary_line.question}}</span>
          </a>
        </dd>
      </div>
    {% endfor %}
  </dl>
{%- endmacro%}
